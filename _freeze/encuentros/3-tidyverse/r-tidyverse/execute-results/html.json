{
  "hash": "6d21d22a025b21160733eecbd5a63c77",
  "result": {
    "markdown": "---\ntitle: \"Procesando datos con `{tidyverse}`\"\nsubtitle: \"Principales herramientas (funciones) para el tratamiento de datos\"\nauthor: \"[🔗 Estación R](https://estacion-r.netlify.app/)\"\ninstitution: Estación R\ndate: 2024-02-21\nfooter: \"[🔗 Introducción al Procesamiento de Datos con R](https://pablotis.github.io/intro-r-quarto/)\"\nlogo: ../../img/background-estacion_r_v2.png\nformat: \n  revealjs: \n    width: 1600\n    theme: ../estilo_diapos.scss\n    multiplex: true\n    transition: fade\n    progress: true\n    highlight-style: printing\n    embed-resources: true\n    code-line-numbers: false\n    code-block-bg: true\n    code-copy: true\ncode-block-border-left: \"#31BAE9\"\nexecute:\n  execute:\n  freeze: auto\n  echo: true\n---\n\n\n# Bienvenidos y bienvenidas a Estación R\n\n::: columns\n::: {.column width=\"50%\"}\n💬 [Slack](https://join.slack.com/t/estacion-r/shared_invite/zt-2cktmesg3-11HhUxMFmynQe18ZsBkVpA)\n\n🔗 [Web](https://estacion-r.netlify.app/)\n\n🐘 [Mastodon](https://botsin.space/@r_tips)\n\n𝕏 [X](https://twitter.com/estacion_erre)\n\n✉️ [Correo](mailto:pablotisco@gmail.com)\n:::\n\n::: {.column width=\"50%\"}\n[Instagram](https://www.instagram.com/estacion_ere?igsh=OWhtcWR5ZGkwb3Bw&utm_source=qr)\n\n[LinkedIn](https://www.linkedin.com/company/estacion-r/)\n:::\n:::\n\n------------------------------------------------------------------------\n\n## ¿Qué vimos?\n\n<br>\n\n✅ Conceptos básicos de R (valores, vectores, data.framtes, funciones, objetos)\n\n<br>\n\n✅ Cómo armar y organizar un proyecto de trabajo\n\n<br>\n\n✅ Qué son los paquetes (o librerías)\n\n## Hoja de Ruta\n\n::: columns\n::: {.column width=\"50%\"}\n📌 ¿Qué es la Ciencia de Datos?\n\n<br>\n\n📦 Paquete `{dplyr}`\n\n```         \n🔧 `select()` 🔧 `filter()` \n\n🔧 `mutate()` 🔧 `rename()` \n\n🔧 `arrange()` \n\n🔧 `group_by()` 🔧 `summarise()`  \n\n🔧 `joins` \n```\n:::\n\n::: {.column width=\"50%\"}\n📌 La pipa (`|>` o `%>%`)\n\n<br>\n\n📦 Paquete `{tidyr}`\n\n```         \n🔧 `pivot_longer()` 🔧 `pivot_wider()`  \n```\n:::\n:::\n\n## Configuración para esta clase\n\n<br>\n\n-   Armar un proyeto de trabajo nuevo\n\n-   Crear una carpeta en el llamada `datos`\n\n-   Descargar la base del [**Padrón Único Nacional de Alojamientos**](https://datos.yvera.gob.ar/dataset/padron-unico-nacional-alojamiento) (Argentina) y ubicarla en la carpeta `datos`\n\n-   Crear un **script** de trabajo\n\n# ¿Qué es la Ciencia de Datos?\n\n## ¿Qué es la Ciencia de Datos?\n\n![](../1-intro-r/images/proceso_ciencia_datos.jpg){fig-alt=\"r project console\"}\n\n# `{tidyverse}`\n\n## ¿Qué es `{tidyverse}`?\n\n::: incremental\n-   Una colección de paquetes.\n\n-   Comparten una filosofía acerca de los datos y la programación en R (\"*tidy*\" -*ordenado*-).\n\n-   Tienen una coherencia para ser utilizados en conjunto.\n\n-   Orientado a ser leído y escrito por y para seres humanos.\n\n-   Una comunidad, basada en los principios del código abierto y trabajo colaborativo.\n:::\n\n## ¿Qué es `{tidyverse}`?\n\n![](../1-intro-r/images/circuito_del_dato_tidy.png)\n\n## `{tidyverse}`\n\n<br>\n\n-   Instalación:\n\n``` r\ninstall.packages(\"tidyverse\")\n```\n\n## `{tidyverse}`\n\n<br>\n\n-   Cargo el paquete:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.4.4     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n:::\n\n\n## `{tidyverse}`\n\n-   Nos evita tener que instalar uno por uno a cada paquete:\n\n``` r\ninstall.packages(\"dplyr\")\ninstall.packages(\"tidyr\")\ninstall.packages(\"ggplot2\")\n```\n\n<br>\n\n-   Como también tener que convocarlos de a uno:\n\n``` r\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\n```\n\n# La pipa\n\n## Un operador llamado `pipa`\n\n<br>\n\n<br>\n\n::: columns\n::: {.column width=\"50%\"}\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbase_de_datos |> \n  funcion1 |> \n  funcion2 |>  \n  funcion3\n```\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n![](images/pipa.gif)\n:::\n:::\n\n## Un operador llamado `pipa`\n\n<br>\n\n-   Pipa de **R base**: `|>`\n\n<br>\n\n-   Pipa de **{magritr}**: `%>%`\n\n## Ejemplo:\n\n<br> <br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos <- data.frame(nombre = c(\"Pirulanzo\", \"Rodogovia\", \"Rodogovia\", \"Rodogovia\"),\n                    edad = c(23, 12, 87, 32))\n\ndatos\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n     nombre edad\n1 Pirulanzo   23\n2 Rodogovia   12\n3 Rodogovia   87\n4 Rodogovia   32\n```\n:::\n:::\n\n\n## Ejemplo:\n\n-   Quiero calcular qué proporción de personas se llaman *Rodogovia*\n\n<br>\n\n-   Antes (*sin el pipe*):\n\n\n::: {.cell}\n\n```{.r .cell-code}\nround(prop.table(table(datos$nombre)), digits = 1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nPirulanzo Rodogovia \n      0.2       0.8 \n```\n:::\n:::\n\n\n## Ejemplo:\n\n<br>\n\n-   Después (*con el pipe*):\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndatos$nombre |> \n  table() |> \n  prop.table() |> \n  round(digits = 1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nPirulanzo Rodogovia \n      0.2       0.8 \n```\n:::\n:::\n\n\n# \n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/logo dplyr.png){fig-align='center' width=30%}\n:::\n:::\n\n\n## Funciones del paquete dplyr:\n\n<br>\n\n| **Función**   |                            **Acción** |\n|:--------------|--------------------------------------:|\n| `select()`    |     *selecciona o descarta variables* |\n| `filter()`    |                    *selecciona filas* |\n| `mutate()`    |              *crea / edita variables* |\n| `rename()`    |                  *renombra variables* |\n| `group_by()`  | *segmenta en funcion de una variable* |\n| `summarize()` |         *genera una tabla de resúmen* |\n\n# **select()**\n\n<html>\n\n::: {style=\"float:left\"}\n:::\n\n<<<<<<< HEAD\n<hr color='#EB811B' size=1px width=1125px>\n=======\n<hr color='#EB811B' size=1px width=1600px>\n>>>>>>> e221c9b (agrego descarga de diapos)\n\n</html>\n\n<html>\n\n\n```{=html}\n<<<<<<< HEAD\n<p style=\"color:grey;\" align:\"center\">Elige o descarta columnas de una base de datos</p>\n=======\n<p style=\"color:grey;\" align:\"left\">Elige o descarta columnas de una base de datos</p>\n>>>>>>> e221c9b (agrego descarga de diapos)\n```\n\n</html>\n\n## `select()`\n\n<br>\n\n-   La función tiene la siguiente estructura:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbase_de_datos |> \n  select(id, nombre) #<<\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/select_presentacion.png){fig-align='center' width=65%}\n:::\n:::\n\n\n## Caso práctico\n\n\n\n\n\n``` r\n# Cargo paquete\nlibrary(readr)\n\n# Importo datos\ndf_puna <- read_csv(\"datos/puna_base_agregada.csv\")\n```\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Exploro la base\ncolnames(df_puna)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"indice_tiempo\"           \"region\"                 \n [3] \"ruta_natural\"            \"provincia_codigo\"       \n [5] \"provincia_nombre\"        \"departamento_partido\"   \n [7] \"localidad\"               \"clasificacion_minturdep\"\n [9] \"tipo\"                    \"establecimientos\"       \n[11] \"unidades\"                \"habitaciones\"           \n[13] \"plazas\"                 \n```\n:::\n:::\n\n\n## Caso práctico\n\n<br>\n\n-   **Pedido:** La coordinadora me ha solicitado conocer la cantidad de plazas que hay por localidad y, si es posible, saber de qué tipo son los alojamientos\n\n<br>\n\n-   Variables de trabajo:\n\n    -   *localidad*\n    -   *plazas*\n    -   *tipo*\n\n## Caso práctico\n\n<br>\n\n-   Selecciono las 3 columnas de interés\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3,4\"}\nlibrary(tidyverse)\n\ndf_puna |> \n  select(localidad, tipo, plazas)\n```\n:::\n\n\n## Caso práctico\n\n<br>\n\n-   Selecciono las 3 columnas de interés\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nlibrary(tidyverse)\n\ndf_puna_sel <- df_puna |> \n  select(localidad, tipo, plazas)\n```\n:::\n\n\n<br>\n\n-   Chequeo las columnas del nuevo objeto\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1\"}\ncolnames(df_puna_sel)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"localidad\" \"tipo\"      \"plazas\"   \n```\n:::\n:::\n\n\n# Otras formas de seleccionar...\n\n## `select()` - *por posición*\n\n<br>\n\n1.  Chequeo la posición:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(df_puna)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"indice_tiempo\"           \"region\"                 \n [3] \"ruta_natural\"            \"provincia_codigo\"       \n [5] \"provincia_nombre\"        \"departamento_partido\"   \n [7] \"localidad\"               \"clasificacion_minturdep\"\n [9] \"tipo\"                    \"establecimientos\"       \n[11] \"unidades\"                \"habitaciones\"           \n[13] \"plazas\"                 \n```\n:::\n:::\n\n\n## `select()` - *por posición*\n\n<br>\n\n2.  Selecciono\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_posicion <- df_puna |> \n  select(7, 9, 13)\n```\n:::\n\n\n## `select()` - *por posición*\n\n<br>\n\n3.  Chequeo\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(df_puna_sel_posicion)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"localidad\" \"tipo\"      \"plazas\"   \n```\n:::\n:::\n\n\n## `select()` - *por posición (columnas consecutivas)*\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_posicion2 <- df_puna |> \n  select(1:3)\n```\n:::\n\n\n## `select()` - *por posición (columnas consecutivas)*\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_posicion2 <- df_puna |> \n  select(1:3)\n```\n:::\n\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(df_puna_sel_posicion2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"indice_tiempo\" \"region\"        \"ruta_natural\" \n```\n:::\n:::\n\n\n#  {.center auto-animate=\"true\"}\n\n![](https://imgs.search.brave.com/Frz7Kuv_uvyXQb269pQbZ2-UxWSZ-oIPOgfP4lTWmmU/rs:fit:860:0:0/g:ce/aHR0cHM6Ly9naWZk/Yi5jb20vaW1hZ2Vz/L2hpZ2gvc2FjaGEt/YmFyb24tY29oZW4t/dmVyeS1uaWNlLXFq/N2x5YXFudXBueTl6/ODAuZ2lm.gif)\n\n## `select()` - *por nombre (consecutiva)*\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_posicion3 <- df_puna |> \n  select(establecimientos:plazas)\n```\n:::\n\n\n## `select()` - *por nombre (consecutiva)*\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_posicion3 <- df_puna |> \n  select(establecimientos:plazas)\n```\n:::\n\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(df_puna_sel_posicion3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"establecimientos\" \"unidades\"         \"habitaciones\"     \"plazas\"          \n```\n:::\n:::\n\n\n# \n\n![](https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExeXk3OXA1YnRnOGFkOGxqMjd4ZHU4MzZha2I4dzhqMmw0NTFmN2RoZSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/d4W4ZshZVbrqYvVnh8/giphy.gif)\n\n## `select()` - *Por patrones de texto*\n\n<br>\n\n**Trío:**\n\n-   `starts_with()` --\\> *empieza con...*\n\n-   `ends_with()` --\\> *termina con...*\n\n-   `contains()` --\\> *contiene...*\n\n## `select()` + `starts_with()`\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_patron1 <- df_puna |> \n  select(starts_with(\"provincia\"))\n```\n:::\n\n\n## `select()` + `starts_with()`\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_patron1 <- df_puna |> \n  select(starts_with(\"provincia\"))\n```\n:::\n\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(df_puna_sel_patron1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"provincia_codigo\" \"provincia_nombre\"\n```\n:::\n:::\n\n\n## `select()` + `ends_with()`\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_patron2 <- df_puna |> \n  select(ends_with(\"o\"))\n```\n:::\n\n\n## `select()` + `starts_with()`\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_patron2 <- df_puna |> \n  select(ends_with(\"o\"))\n```\n:::\n\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(df_puna_sel_patron2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"indice_tiempo\"        \"provincia_codigo\"     \"departamento_partido\"\n[4] \"tipo\"                \n```\n:::\n:::\n\n\n# \n\n![](https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExbjEzMW15cWk3bXJ5MzQ0aXQwd2IwenIyN3JseTlucW9nc2R0enY4NCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Lk023zZqHJ3Zz4rxtV/giphy.gif)\n\n## `select()` + `contains()`\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_patron3 <- df_puna |> \n  select(contains(\"_\"))\n```\n:::\n\n\n## `select()` + `contains()`\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_sel_patron3 <- df_puna |> \n  select(contains(\"_\"))\n```\n:::\n\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(df_puna_sel_patron3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"indice_tiempo\"           \"ruta_natural\"           \n[3] \"provincia_codigo\"        \"provincia_nombre\"       \n[5] \"departamento_partido\"    \"clasificacion_minturdep\"\n```\n:::\n:::\n\n\n# \n\n![](https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExYXprbDVsM2l1MmF5dDRjMGY1N2xiNW52dmFscHNsM3NhbDZ5eXc5NSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/NEvPzZ8bd1V4Y/giphy.gif)\n\n# LA COMBINACIÓN FINAL\n\n## `select()`\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\ndf_puna_select_tuto <- df_puna |> \n  select(localidad, 2, starts_with(\"provincia\"), 9:11)\n```\n:::\n\n\n## `select()`\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"1\"}\ndf_puna_select_tuto <- df_puna |> \n  select(localidad, 2, starts_with(\"provincia\"), 9:11)\n```\n:::\n\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolnames(df_puna_select_tuto)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"localidad\"        \"region\"           \"provincia_codigo\" \"provincia_nombre\"\n[5] \"tipo\"             \"establecimientos\" \"unidades\"        \n```\n:::\n:::\n\n\n# \n\n![](images/explode.gif)\n\n# Ejercitación grupal\n\n## Ejercitación\n\n-   Crear un objeto en donde importamos la base de datos de Alojamientos.\n\n-   Seleccionar 3 variables de la base según el nombre de las mismas y guardar en otro objeto.\n\n-   Seleccionar 3 variables de la base según la posición de las mismas y guardar en otro objeto.\n\n-   Seleccionar todas las variables que **empiecen** con un patrón de texto (a elegir).\n\n# **filter()**\n\n<html>\n\n::: {style=\"float:left\"}\n:::\n\n<<<<<<< HEAD\n<hr color='#EB811B' size=1px width=1125px>\n=======\n<hr color='#EB811B' size=1px width=1600px>\n>>>>>>> e221c9b (agrego descarga de diapos)\n\n</html>\n\n<html>\n\n\n```{=html}\n<<<<<<< HEAD\n<p style=\"color:grey;\" align:\"center\">Define los casos (filas) en base a una condición</p>\n=======\n<p style=\"color:grey;\" align:\"left\">Define los casos (filas) en base a una condición</p>\n>>>>>>> e221c9b (agrego descarga de diapos)\n```\n\n</html>\n\n## `filter()`\n\n<br>\n\n-   La función tiene la siguiente estructura:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nbase_de_datos |> \n  filter(condicion) \n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/filter_presentacion.png){fig-align='center' width=65%}\n:::\n:::\n\n\n## `filter()`\n\n<br>\n\n-   La función tiene la siguiente estructura:\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nbase_de_datos |> \n  filter(Edad > 65) \n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](images/filter_presentacion.png){fig-align='center' width=65%}\n:::\n:::\n\n\n## Caso práctico\n\n<br>\n\n-   La directora de tesis me pidió que estudie los alojamientos de tipo **Camping**.\n\n<br>\n\n-   Universo de análisis / Población de estudio:\n\n<<<<<<< HEAD\n    ```         \n    - Alojamientos tipo _Camping_\n    ```\n=======\n\n    - Alojamientos tipo *Camping*\n\n>>>>>>> e221c9b (agrego descarga de diapos)\n\n## Caso práctico\n\n<br>\n\n-   Chequeo con qué tipos de alojamiento cuento en la base:\n\n## Caso práctico\n\n<br>\n\n-   Chequeo con qué tipos de alojamiento cuento en la base:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(df_puna$clasificacion_minturdep)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Albergue municipal / complejo deportivo\"\n [2] \"Caba\\xf1as / bungalows\"                 \n [3] \"Conjunto de unidades turisticas\"        \n [4] \"Establecimiento rural\"                  \n [5] \"Hosteria\"                               \n [6] \"Hotel 1 estrella\"                       \n [7] \"Hotel 2 estrellas\"                      \n [8] \"Hotel boutique\"                         \n [9] \"Hotel sin categorizar\"                  \n[10] \"Residencial\"                            \n[11] \"Camping\"                                \n[12] \"Hotel 3 estrellas\"                      \n[13] \"Sin clasificar\"                         \n[14] \"Motel\"                                  \n[15] \"Hospedaje\"                              \n[16] \"Posada\"                                 \n[17] \"Apart hotel\"                            \n[18] \"Albergue / b&b / hostel\"                \n[19] \"Hotel 4 estrellas\"                      \n[20] \"Hotel 5 estrellas\"                      \n[21] \"Dormis\"                                 \n[22] \"Residencia universitaria\"               \n[23] \"Hotel sindical / mutual\"                \n[24] \"Complejo turistico\"                     \n[25] \"Refugio\"                                \n[26] \"Pension\"                                \n[27] \"Lodge de pesca / caza/ en bodegas\"      \n```\n:::\n:::\n\n<<<<<<< HEAD\n=======\n\n## Caso práctico\n\n<br>\n\n-   Aplico filtro\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\ndf_filtrada <- df_puna |> \n  filter(clasificacion_minturdep == \"Camping\")\n```\n:::\n\n\n## Caso práctico\n\n<br>\n\n-   Chequeo filtro\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(df_filtrada$clasificacion_minturdep)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Camping\"\n```\n:::\n:::\n\n\n\n## `filter()`\n\n::: columns\n::: {.column width=\"50%\" style=\"font-size: 0.68\"}\n\n\n|Condición |Acción              |\n| :---     | :---               |\n| `==`     | *igual*            |\n| `%in%`   | *incluye*          |\n| `!=`     | *distinto*         |\n| `>`      | *mayor que*        |\n| `<`      | *menor que*        |\n| `>=`     | *mayor o igual que*|\n| `<=`     | *menor o igual que*|\n\n:::\n\n::: {.column width=\"50%\" style=\"font-size: 0.68\"}\n\n| Operador | Descripción                                    |\n| :---     | :---                                           |\n| `&`      | *y* - Cuando se cumplen ambas condiciones      |\n| &#124;   | *o* - Cuando se cumple una u otra condición    |\n\n:::\n:::\n\n## Caso práctico\n\n<br>\n\n-   La encargada de la oficina de turismo de Buenos Aires quiere que le arme una base sólo con alojamientos de tipo *Camping* y *Hoteles 3 estrellas*.\n\n## Caso práctico\n\n<br>\n\n- Chequeo las categorías de la variable `clasificacion_minturdep`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(df_puna$clasificacion_minturdep)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Albergue municipal / complejo deportivo\"\n [2] \"Caba\\xf1as / bungalows\"                 \n [3] \"Conjunto de unidades turisticas\"        \n [4] \"Establecimiento rural\"                  \n [5] \"Hosteria\"                               \n [6] \"Hotel 1 estrella\"                       \n [7] \"Hotel 2 estrellas\"                      \n [8] \"Hotel boutique\"                         \n [9] \"Hotel sin categorizar\"                  \n[10] \"Residencial\"                            \n[11] \"Camping\"                                \n[12] \"Hotel 3 estrellas\"                      \n[13] \"Sin clasificar\"                         \n[14] \"Motel\"                                  \n[15] \"Hospedaje\"                              \n[16] \"Posada\"                                 \n[17] \"Apart hotel\"                            \n[18] \"Albergue / b&b / hostel\"                \n[19] \"Hotel 4 estrellas\"                      \n[20] \"Hotel 5 estrellas\"                      \n[21] \"Dormis\"                                 \n[22] \"Residencia universitaria\"               \n[23] \"Hotel sindical / mutual\"                \n[24] \"Complejo turistico\"                     \n[25] \"Refugio\"                                \n[26] \"Pension\"                                \n[27] \"Lodge de pesca / caza/ en bodegas\"      \n```\n:::\n:::\n\n\n## Caso práctico\n\n<br>\n\n- Filtro (opción 1):\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_camping_y_hoteles3estrellas <- df_puna |> \n  filter(clasificacion_minturdep == \"Camping\" | clasificacion_minturdep == \"Hotel 3 estrellas\")\n```\n:::\n\n\n## Caso práctico\n\n<br>\n\n- Chequeo filtro\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(df_camping_y_hoteles3estrellas$clasificacion_minturdep)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Camping\"           \"Hotel 3 estrellas\"\n```\n:::\n:::\n\n\n\n## Caso práctico\n\n<br>\n\n- Filtro (opción 2, operador: `%in%`):\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_camping_y_hoteles3estrellas <- df_puna |> \n  filter(clasificacion_minturdep %in% c(\"Camping\", \"Hotel 3 estrellas\"))\n```\n:::\n\n\n## Caso práctico\n\n<br>\n\n- Chequeo filtro\n\n::: {.cell}\n\n```{.r .cell-code}\nunique(df_camping_y_hoteles3estrellas$clasificacion_minturdep)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Camping\"           \"Hotel 3 estrellas\"\n```\n:::\n:::\n\n\n## `select()` + `filter()`\n\n<br>\n\n:::: {.columns}\n::: {.column width=\"60%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2,3\"}\ndf_puna |> \n  select(localidad, \n         clasificacion_minturdep)\n```\n:::\n\n:::\n\n::: {.column width=\"40%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 14,717 × 2\n   localidad clasificacion_minturdep                  \n   <chr>     <chr>                                    \n 1 Baradero  \"Albergue municipal / complejo deportivo\"\n 2 Baradero  \"Caba\\xf1as / bungalows\"                 \n 3 Baradero  \"Conjunto de unidades turisticas\"        \n 4 Baradero  \"Establecimiento rural\"                  \n 5 Baradero  \"Hosteria\"                               \n 6 Baradero  \"Hotel 1 estrella\"                       \n 7 Baradero  \"Hotel 2 estrellas\"                      \n 8 Baradero  \"Hotel boutique\"                         \n 9 Baradero  \"Hotel sin categorizar\"                  \n10 Baradero  \"Residencial\"                            \n# ℹ 14,707 more rows\n```\n:::\n:::\n\n:::\n::::\n\n\n## `select()` + `filter()`\n\n<br>\n\n:::: {.columns}\n::: {.column width=\"60%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"4\"}\ndf_puna |> \n  select(localidad, \n         clasificacion_minturdep) |> \n  filter(clasificacion_minturdep %in% c(\"Camping\", \"Hotel 3 estrellas\"))\n```\n:::\n\n:::\n\n::: {.column width=\"40%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,438 × 2\n   localidad                  clasificacion_minturdep\n   <chr>                      <chr>                  \n 1 Belen de Escobar           Camping                \n 2 Belen de Escobar           Hotel 3 estrellas      \n 3 Fatima                     Hotel 3 estrellas      \n 4 Ramallo                    Hotel 3 estrellas      \n 5 Villa Ramallo              Hotel 3 estrellas      \n 6 San Nicolas de Los Arroyos Hotel 3 estrellas      \n 7 San Pedro                  Camping                \n 8 San Pedro                  Hotel 3 estrellas      \n 9 Zarate                     Hotel 3 estrellas      \n10 9 de Julio                 Hotel 3 estrellas      \n# ℹ 1,428 more rows\n```\n:::\n:::\n\n:::\n::::\n\n\n# Ejercitación grupal\n\n\n## Ejercitación\n\n-   Crear un objeto que contenga la base de PUNA sólo con las variables `localidad`, `ruta_natural` y `plazas`  \n\n-   En ese mismo objeto, quedarse sólo con las filas de la **ruta natural** `Delta`.\n\n-   Calcular cuántas plazas hay en total para la ruta natural `Delta` (*tip: la función `sum()` puede ser de ayuda*)\n\n\n\n# **mutate()**\n\n<html>\n\n::: {style=\"float:left\"}\n:::\n\n<hr color='#EB811B' size=1px width=1600px>\n\n</html>\n\n<html>\n\n\n```{=html}\n<p style=\"color:grey;\" align:\"left\">Crea / edita variables (columnas)</p>\n```\n\n</html>\n\n\n## `mutate()`\n\n<br>\n\n-   La función tiene la siguiente estructura:\n\n<br>\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"2\"}\nbase_de_datos %>% \n   mutate(var_nueva = var_1 + var_2)\n```\n:::\n\n\n## `mutate()` - Caso práctico\n\n<br> \n\n- Llega a la oficina una persona interesada en saber cuál es el valor total disponible para dormir en los establecimientos. Quiere, entonces, conocer el resultado de la suma entre `habitaciones` y `plazas`.\n\n. . .\n\n- Para ello, podemos crear una variable que contenga este resultado:\n\n## `mutate()` - Caso práctico\n\n:::: {.columns}\n::: {.column width=\"60%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"3\"}\ndf_lugar_tot <- df_puna |> \n  select(localidad, habitaciones, plazas) |> \n  mutate(lugar_disponible = habitaciones + plazas)\n```\n:::\n\n:::\n\n::: {.column width=\"40%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 14,717 × 4\n   localidad habitaciones plazas lugar_disponible\n   <chr>            <dbl>  <dbl>            <dbl>\n 1 Baradero             6     30               36\n 2 Baradero             0    277              277\n 3 Baradero             0     50               50\n 4 Baradero            57    131              188\n 5 Baradero            68    164              232\n 6 Baradero            15     34               49\n 7 Baradero            49    135              184\n 8 Baradero            27     78              105\n 9 Baradero            28     60               88\n10 Baradero             5     15               20\n# ℹ 14,707 more rows\n```\n:::\n:::\n\n:::\n::::\n\n>>>>>>> e221c9b (agrego descarga de diapos)\n",
    "supporting": [
      "r-tidyverse_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}